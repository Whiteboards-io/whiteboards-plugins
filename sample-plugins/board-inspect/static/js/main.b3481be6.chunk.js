(this["webpackJsonp@whiteboards/sample-plugins"]=this["webpackJsonp@whiteboards/sample-plugins"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),c=n(23),a=n.n(c),o=(n(86),n(87),n(12)),l=n.p+"static/media/logo.6ce24c58.svg",u=n(2);function s(e){var t=e.children,n=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=n.current;if(e){var t=new ResizeObserver((function(e){var t=e[0].contentRect,n=t.width,i=t.height;Object(o.pluginToHost)("resizePluginFrame",{width:n+"px",height:i+"px"})}));return t.observe(e),function(){return t.unobserve(e)}}}),[]),Object(u.jsx)("div",{ref:n,children:t})}function d(){return Object(i.useEffect)((function(){Object(o.registerTemplate)({id:"hello-world-template",title:"Hello World",description:"This is an example plugin with configuration screen",illustration:window.location.origin+l,configurationUrl:window.location.origin+window.location.pathname+"?plugin=hello-world&page=template-config",content:{}})}),[]),null}function j(){return Object(u.jsxs)(s,{children:[Object(u.jsx)("h3",{children:"Hello world!"}),Object(u.jsx)("p",{children:"This is a very simple template."}),Object(u.jsx)("button",{onClick:function(){return Object(o.updateTemplateContent)({cards:{_index:{card1:!0},_items:{card1:{id:"card1",x:0,y:0,width:100,height:50,text:"Hello World!"}}}})},children:"Click to continue"})]})}var b=n(62),f=n(37),h=n(69),O=n(127),p=n(128);function g(){return Object(i.useEffect)((function(){Object(o.registerTemplate)({id:"jira-integration-template",title:"Jira integration",description:"This is an example plugin with configuration screen that integrates with Jira",illustration:window.location.origin+l,configurationUrl:window.location.origin+window.location.pathname+"?plugin=jira-integration&page=template-config",content:{}})}),[]),null}function x(){var e=Object(h.a)(o.getJiraSites,[]),t=Object(i.useState)({siteId:void 0,jql:"ORDER BY lastViewed DESC"}),n=Object(f.a)(t,2),r=n[0],c=n[1],a=function(e){return c(Object(b.a)(Object(b.a)({},r),e))};if(Object(i.useEffect)((function(){Object(o.updateTemplateContent)({cards:{_index:{importZone:!0},_items:{importZone:{id:"importZone",x:0,y:0,width:300,height:300,importIssues:!0,jql:r.jql,jqlLayout:"random",jqlLimit:25,siteId:r.siteId}}}})}),[r]),e.loading)return Object(u.jsx)("b",{children:"Loading..."});if(!e.result)return Object(u.jsx)("b",{children:"Error! Unable to fetch Jira sites."});var l=e.result.map((function(e){return{label:e.name,value:e.id}}));return Object(u.jsxs)(s,{children:[Object(u.jsx)("h3",{children:"Site"}),Object(u.jsx)(O.a,{value:l.find((function(e){return e.value===r.siteId})),options:l,onChange:function(e){return a({siteId:null===e||void 0===e?void 0:e.value,projectId:null})}}),Object(u.jsx)("h3",{children:"Issues"}),Object(u.jsx)(p.a,{isDisabled:!r.siteId,value:r.jql,onChange:function(e){return a({jql:e.target.value})}})]})}var v=n.p+"static/media/icon.137941fd.svg";function m(){return Object(i.useEffect)((function(){Object(o.registerSidebarTool)({id:"board-inspect",icon:window.location.origin+v,tooltip:"Board inspect",contentUrl:window.location.origin+window.location.pathname+"?plugin=board-inspect&page=sidebar"})}),[]),null}var w=n(126);function C(e,t){var n=Object(i.useState)(null),r=Object(f.a)(n,2),c=r[0],a=r[1];return Object(i.useEffect)((function(){return t(e,(function(e){return a(e)}))}),[]),c}function I(e){var t=Object(i.useState)(),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)((function(){return e((function(e){return c(e)}))}),[]),r}var k=n(79),E=n(78),L=n.n(E);n(115);function S(e){var t=e.value,n=e.onChange,r=Object(i.useRef)(null),c=Object(i.useRef)(null),a=function(e){var t=Object(i.useRef)(e);return t.current=e,Object(i.useCallback)((function(){return t.current}),[])}(t);return Object(i.useEffect)((function(){if(r.current){var e=new L.a(r.current,{onChangeJSON:function(e){k.a.isEqual(e,a())||n(e)}},t);return c.current=e,function(){return e.destroy()}}}),[]),Object(i.useEffect)((function(){var e;null===(e=c.current)||void 0===e||e.update(t)}),[t]),Object(u.jsx)("div",{ref:r})}function F(){var e=I(o.watchCardsIndex),t=I(o.watchLinesIndex),n=Object(i.useState)(),r=Object(f.a)(n,2),c=r[0],a=r[1];return c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{style:{marginLeft:"40px"},children:"Board inspect"}),Object(u.jsx)("div",{style:{position:"absolute",right:0,top:0},children:Object(u.jsx)(w.a,{onClick:function(){return a(null)},children:"Back"})}),"card"===(null===c||void 0===c?void 0:c[0])?Object(u.jsx)(T,{cardId:null===c||void 0===c?void 0:c[1]}):"line"===(null===c||void 0===c?void 0:c[0])?Object(u.jsx)(y,{lineId:null===c||void 0===c?void 0:c[1]}):null]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{style:{marginLeft:"40px"},children:"Board inspect"}),e&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Cards"}),Object(u.jsx)("ul",{children:e.map((function(e){return Object(u.jsx)(R,{cardId:e,onClick:function(){return a(["card",e])}},e)}))})]}),t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Lines"}),Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)(q,{lineId:e,onClick:function(){return a(["line",e])}},e)}))})]})]})}function T(e){var t=e.cardId,n=C(t,o.watchCardData);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h2",{children:["Card: ",t]}),Object(u.jsx)(S,{value:n,onChange:function(e){return Object(o.setCardData)(t,e)}})]})}function y(e){var t=e.lineId,n=C(t,o.watchLineData);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h2",{children:["Line: ",t]}),Object(u.jsx)(S,{value:n,onChange:function(e){return Object(o.setLineData)(t,e)}})]})}function R(e){var t=e.cardId,n=e.onClick;return Object(u.jsx)("li",{"data-card-id":t,children:Object(u.jsx)(w.a,{appearance:"link",onClick:n,children:t})})}function q(e){var t=e.lineId,n=e.onClick;return Object(u.jsx)("li",{"data-line-id":t,children:Object(u.jsx)(w.a,{appearance:"link",onClick:n,children:t})})}var D=function(){var e=new URLSearchParams(window.location.search),t=e.get("plugin"),n=e.get("page");if("hello-world"===t)return"template-config"===n?Object(u.jsx)(j,{}):null===n?Object(u.jsx)(d,{}):null;if("jira-integration"===t)return"template-config"===n?Object(u.jsx)(x,{}):null===n?Object(u.jsx)(g,{}):null;if("board-inspect"!==t)return null;switch(n){case"sidebar":return Object(u.jsx)(F,{});case null:return Object(u.jsx)(m,{});default:return null}},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,130)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),c(e),a(e)}))};a.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),B()},86:function(e,t,n){},87:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.b3481be6.chunk.js.map